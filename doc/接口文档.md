## CloudEye 接口文档##

[TOC]

#### 统一说明
- 所有的请求，没有意外的话，全部都用post
- 所有返回结果统一有：
	- code： 结果代码[见附表]
	- message： 结果消息
	- data： 如果有数据，则用json形式返回对应信息，如果没有则返回空，即{}
- 所有的参数类型，我现在只是脑补的，很可能改变
#### 接口说明 **1、**注册

- **请求URL**
> [url/user/register](#)

- **请求参数**
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| user_name| String | 用户真实姓名,1~32位 |
| user_nickname| String | 用户昵称， 4~32位 |
| telephone | String | 手机号|
|password|String|用户密码，上线后使用md5加密，6~32位|
|userIdentiNum|String|身份证号码|


- **返回参数**
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| code| Integer|执行结果code|
| message| String|执行结果消息|
|data|json对象|恒为{}|

- **返回示例**
>    
```java 
暂空
```

#### 接口说明 **2、**登录

- **请求URL**
> [url/user/login](#)

- **请求参数**
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| telephone | String | 手机号|
|password|String|用户密码，上线后使用md5加密，6~32位|

- **返回参数**
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| code| Integer|执行结果code|
| message| String|执行结果消息|
|data|json对象|若登录失败，则为{}，若成功，见下列说明|
DATA字段说明
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| user_id| Integer|用户的唯一标识符|
| missing_person_list|array|用户当前的丢失小孩列表|

- **返回示例**
>    
```java 
暂空
```
#### 接口说明 **3、**上传地理位置信息

- **注意**: 这个请求仅在登录成功的时候发送
- **请求URL**
> [url/location/set](#)

- **请求参数**
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| user_id | Integer | user_id 登录的时候获得的|
|channel_id |String |从百度云推送获得的设备标定的id|
|location|[x,y]的形式|(x belong to [-180,180], y belong to [-90,90])|

- **返回参数**
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| code| Integer|执行结果code|
| message| String|执行结果消息|
|data|json对象|为{}|

- **返回示例**
>    
```java 
暂空
```

#### 接口说明 **4、**更新地理位置信息

- **请求URL**
> [url/location/update](#)

- **请求参数**
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| user_id | Integer | user_id 登录的时候获得的|
|location|[x,y]的array形式|(x,代表经度belong to [-180,180], y代表维度 belong to [-90,90])|

- **返回参数**
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| code| Integer|执行结果code|
| message| String|执行结果消息|
|data|json对象|为{}|

- **返回示例**
>    
```java 
暂空
```

#### 接口说明 **5、**更新地理位置信息

- **请求URL**
> [url/user/checkupdate](#)

- **请求参数**
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| user_id | Integer | user_id 登录的时候获得的|

- **返回参数**
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| code| Integer|执行结果code|
| message| String|执行结果消息|
|data|json对象|为{'has_update':true of false}, true 代表用户的丢失小孩有最新的进展|

- **返回示例**
>    
```java 
暂空
```


#### 接口说明 **6、**退出登录

- **请求URL**
> [url/user/logout](#)

- **请求参数**
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| user_id | Integer | user_id 登录的时候获得的|

- **返回参数**
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| code| Integer|执行结果code|
| message| String|执行结果消息|
|data|json对象|为{}|

- **返回示例**
>    
```java 
暂空
```

#### 接口说明 **7、**获得我的报案列表[post list]

- **请求URL**
> [url/post/getlist](#)

- **请求参数**
 | 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| user_id | Integer | 登录的时候获得的|
|missing_person_list|array list|登录的时候获得的|

- **返回参数**
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| code| Integer|执行结果code|
| message| String|执行结果消息|
|data|json对象|若失败，则为{}，若成功，见下列说明|
DATA字段说明
注：data的内容是一个数组，若用户没有post过小孩，则为[],否则，数组的每个单元记录了小孩的信息，单元内容见下表：
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| last_track_date| date[待商议] |小孩最后一次被发现的日期|
| standard_photo|array|小孩的标准照片|
|missing_person_id|Integer|丢失的小孩的id，需要保存下来|

- **返回示例**
>    
```java 
暂空
```

#### 接口说明 **7、**获得小孩的详细信息[post list detail]

- **请求URL**
> [url/post/getdetail](#)

- **请求参数**
 | 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| missing_person_id | Integer | 丢失的小孩的id|

- **返回参数**
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| code| Integer|执行结果code|
| message| String|执行结果消息|
|data|json对象|若失败，则为{}，若成功，见下列说明|
DATA字段说明
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| faceplusplus_person_id| String|小孩的图片集id，用于人脸识别的时候上传|
| standard_photo|array|小孩的标准照片|
|name|String|小孩的名字|
|losen_time|Date|小孩丢失时间|
|losen_spot|String|小孩丢失的地点|
|sex|boolean|性别，男1女0|
|age|Integer|年龄|
|name|String|丢失者父母名字|
|telephone|String|丢失者父母的名字|
|description|String|父母对小孩的特征描述|
|has_record|boolean|是否报案|
|person_track_list|array of track_list|用户的跟踪轨迹，若没有则为[]，若有，见下列信息|
|camera_track_list|array of track_list|照相机的跟踪轨迹，若没有则为[]，若有，见下列信息|
person_track_list 详情，person_track_list 是一个数组，下列为数组的每个元素的信息：
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| standard_photo|array|小孩的标准照片|
|name|String|小孩的名字|
|snap_time|Date|拍摄的照片的时间|
|location|String|拍摄的照片的地点|
|confidence|double|匹配度|
|nickname|String|拍摄者的昵称|
|description|String|拍摄者的描述|
camera_track_list 详情，camera_track_list 是一个数组，下列为数组的每个元素的信息：
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| standard_photo|array|小孩的标准照片|
|name|String|小孩的名字|
|snap_time|Date|拍摄的照片的时间|
|location|String|拍摄的照片的地点|
|confidence|double|匹配度|
- **返回示例**
>    
```java 
暂空
```


#### [未必使用]接口说明 **8、**获得小孩的跟踪轨迹列表[track list ]

- **请求URL**
> [url/post/gettrack](#)

- **请求参数**
 | 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| track_list | array of track_objectId |丢失轨迹的id列表|

- **返回参数**
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| code| Integer|执行结果code|
| message| String|执行结果消息|
|data|json对象|若失败，则为{}，若成功，见下列说明|
DATA字段说明
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| faceplusplus_person_id| String|小孩的图片集id，用于人脸识别的时候上传|
| standard_photo|array|小孩的标准照片|
|name|String|小孩的名字|
|losen_time|Date|小孩丢失时间|
|losen_spot|String|小孩丢失的地点|
|sex|boolean|性别，男1女0|
|age|Integer|年龄|
|name|String|丢失者父母名字|
|telephone|String|丢失者父母的名字|
|description|String|父母对小孩的特征描述|
|has_record|boolean|是否报案|
|track_list|array of track_objectId|需要保存，当需要获取用户和摄像头的跟踪轨迹的时候，提交这个信息|

- **返回示例**
>    
```java 
暂空
```
#### 接口说明 **9、**推送消息给丢失小孩的父母
- **通过socket推送**
- 无需请求
- **返回参数**
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| type|  Integer| type = 1|
| name|   Integer|  执行结果code|
| standdardphoto|   String|  执行结果消息|
| losen_time|   Object|  执行结果集|

#### 接口说明 **7、**查询机器人

- **请求URL**
> [api/v2/operating/robotList](#)


- **请求方式** 
>**GET**

- **请求参数**
> | 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status|   Integer,可为空|  机器人可用性 **-1.不可使用 1.可用**|
| curPage|   Integer,可为空|  当前页|
| pageSize|   Integer,可为空|  每页显示数量|

- **返回**
> | 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| success|   boolean|  请求成功与否|
| code|   Integer|  执行结果code|
| message|   String|  执行结果消息|
| results|   Object|  执行结果集|

- **返回示例**
>    
```java 
{
  "success": true,
  "code": 200,
  "message": "操作正确",
  "results": [
    {
      "createdTs": 1471928107000,
      "updatedTs": 1471928107000,
      "id": 3,
      "uid": 23333,
      "useStatus": 1,(使用状态)
      "nickName": "朱阿便",
      "avatar": "http://7xljdd.com2.z0.glb.qiniucdn.com/fa767b500c58206f5f213a0fe4187e47.jpg"
    }
  ],
  "curPage": 1,
  "pageCount": 2,
  "count": 2,
  "hasRecords": true
}
```

#### 接口说明 **3、**修改机器人

- **请求URL**
> [api/v2/operating/updateRobot](#)


- **请求方式** 
>**POST**

- **请求参数**
> | 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| uid|   <mark>Long,**不可为空**</mark>| 机器人UID|
| status|   Integer,可为空| 机器人可用性 **-1.不可使用 1.可用**|

- **返回**
> | 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| success|   boolean|  请求成功与否|
| code|   Integer|  执行结果code|
| message|   String|  执行结果消息|

- **返回示例**
>    
```java 
{
  "success": true,
  "code": 200,
  "message": "操作正确"
}
```

#### 接口说明 **4、**删除机器人

- **请求URL**
> [api/v2/operating/deleteRobot](#)


- **请求方式** 
>**POST**

- **请求参数**
> | 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| uid|   <mark>Long,**不可为空**</mark>| 机器人UID|

- **返回**
> | 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| success|   boolean|  请求成功与否|
| code|   Integer|  执行结果code|
| message|   String|  执行结果消息|

- **返回示例**
>    
```java 
{
  "success": true,
  "code": 200,
  "message": "操作正确"
}
```